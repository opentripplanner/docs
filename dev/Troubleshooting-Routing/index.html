
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.opentripplanner.org/dev/Troubleshooting-Routing/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.8">
    
    
      
        <title>Troubleshooting - OpenTripPlanner 2</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.815d1a91.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#troubleshooting-routing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="OpenTripPlanner 2" class="md-header__button md-logo" aria-label="OpenTripPlanner 2" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OpenTripPlanner 2
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Troubleshooting
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/opentripplanner/OpenTripPlanner" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../Governance/" class="md-tabs__link">
        About
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../Basic-Tutorial/" class="md-tabs__link md-tabs__link--active">
        Usage
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../Developers-Guide/" class="md-tabs__link">
        Development
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../SandboxExtension/" class="md-tabs__link">
        Sandbox
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="OpenTripPlanner 2" class="md-nav__button md-logo" aria-label="OpenTripPlanner 2" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    OpenTripPlanner 2
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/opentripplanner/OpenTripPlanner" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          About
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="About" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Governance/" class="md-nav__link">
        Governance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../History/" class="md-nav__link">
        History
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Deployments/" class="md-nav__link">
        Deployments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Version-Comparison/" class="md-nav__link">
        Comparing OTP2 to OTP1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../OTP2-MigrationGuide/" class="md-nav__link">
        OTP2 migration guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Visual-Identity/" class="md-nav__link">
        Visual Identity
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Usage" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Basic-Tutorial/" class="md-nav__link">
        Basic Tutorial
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Getting-OTP/" class="md-nav__link">
        Getting OTP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Container-Image/" class="md-nav__link">
        Container image
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_4">
          Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuration" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Configuration/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../BuildConfiguration/" class="md-nav__link">
        Build
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../BoardingLocations/" class="md-nav__link">
        Boarding locations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../RouterConfiguration/" class="md-nav__link">
        Router
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Accessibility/" class="md-nav__link">
        Accessibility
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../RouteRequest/" class="md-nav__link">
        Route Request
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../UpdaterConfig/" class="md-nav__link">
        Realtime Updaters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../RoutingModes/" class="md-nav__link">
        Routing Modes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Preparing-OSM/" class="md-nav__link">
        Preparing OSM Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Netex-Norway/" class="md-nav__link">
        Netex and SIRI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Security/" class="md-nav__link">
        Security
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Troubleshooting
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Troubleshooting
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#graph-builder-data-import-issues" class="md-nav__link">
    Graph Builder Data Import Issues
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debug-layers" class="md-nav__link">
    Debug layers
  </a>
  
    <nav class="md-nav" aria-label="Debug layers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interpretation-traversal-permissions-layer" class="md-nav__link">
    Interpretation Traversal permissions layer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openstreetmap-data" class="md-nav__link">
    OpenStreetMap Data
  </a>
  
    <nav class="md-nav" aria-label="OpenStreetMap Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tags-affecting-permissions-and-bicycle-safety" class="md-nav__link">
    Tags affecting permissions and bicycle safety
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-settings" class="md-nav__link">
    Default settings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bicycle-safety-factor" class="md-nav__link">
    Bicycle safety factor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#railway-platforms" class="md-nav__link">
    Railway Platforms
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debug-logging" class="md-nav__link">
    Debug logging
  </a>
  
    <nav class="md-nav" aria-label="Debug logging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#transit-search" class="md-nav__link">
    Transit search
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gtfs-transferstxt-and-netex-interchange-import" class="md-nav__link">
    GTFS Transfers.txt and NeTEx Interchange import
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#further-information" class="md-nav__link">
    Further information
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Development
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Development" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Developers-Guide/" class="md-nav__link">
        Developers' Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Interfaces-Data-Sources/" class="md-nav__link">
        Interfaces and Data Sources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Localization/" class="md-nav__link">
        Localization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Bibliography/" class="md-nav__link">
        Bibliography
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Codestyle/" class="md-nav__link">
        Codestyle
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SandboxExtension/" class="md-nav__link">
        Sandbox development
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ReleaseChecklist/" class="md-nav__link">
        Release Checklist
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Sandbox
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Sandbox" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Sandbox
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SandboxExtension/" class="md-nav__link">
        About
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/ActuatorAPI/" class="md-nav__link">
        Actuator API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/transferanalyzer/" class="md-nav__link">
        Direct transfer analyzer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/GoogleCloudStorage/" class="md-nav__link">
        Google Cloud Storage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/LegacyGraphQLApi/" class="md-nav__link">
        HSL Legacy GraphQL API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/TransmodelApi/" class="md-nav__link">
        Transmodel(NeTEx) GraphQL API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/SiriUpdator/" class="md-nav__link">
        SIRI Updater (Google Cloud)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/SiriAzureUpdater/" class="md-nav__link">
        SIRI Updater (Azure)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/VehicleRentalServiceDirectory/" class="md-nav__link">
        Vehicle Rental Service Directory API support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/SmooveBikeRental/" class="md-nav__link">
        Smoove Bike Rental Updator Support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/MapboxVectorTilesApi/" class="md-nav__link">
        Mapbox Vector Tiles API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/Flex/" class="md-nav__link">
        Flex Routing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/ReportApi/" class="md-nav__link">
        Report API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/InteractiveOtpMain/" class="md-nav__link">
        Interactive OTP Launcher
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/ParkAndRideApi/" class="md-nav__link">
        Park and Ride API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/DataOverlay/" class="md-nav__link">
        Data Overlay
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/VehicleParking/" class="md-nav__link">
        Vehicle Parking Updaters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/VehicleToStopHeuristics/" class="md-nav__link">
        Vehicle-to-stop Heuristics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/GeocoderAPI/" class="md-nav__link">
        Geocoder API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/TravelTime/" class="md-nav__link">
        Travel time isochrones
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/IBIAccessibilityScore/" class="md-nav__link">
        IBI accessibility score
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/Fares/" class="md-nav__link">
        Fares
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/opentripplanner/OpenTripPlanner/edit/master/docs/Troubleshooting-Routing.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="troubleshooting-routing">Troubleshooting Routing</h1>
<h2 id="graph-builder-data-import-issues">Graph Builder Data Import Issues</h2>
<p>When you build a graph, OTP may encounter clearly incorrect or ambiguous data, or may detect less
severe, but potentially problematic situations in the input data. Such problems should result in a
"Data Import Issue" being generated. These issues are logged the the <code>DATA_IMPORT_ISSUES</code> console
logger, depending on your need you might turn this logger on/off. At the end of the graph build
process, OTP prints a summary of all the issues, like the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a> 11:35:57.515 INFO (Graph.java:970) Summary (number of each type of issues):
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a> 11:35:57.518 INFO (Graph.java:976)     TurnRestrictionBad - 560
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a> 11:35:57.518 INFO (Graph.java:976)     TurnRestrictionException - 15
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a> 11:35:57.518 INFO (Graph.java:976)     StopLinkedTooFar - 22
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a> 11:35:57.518 INFO (Graph.java:976)     HopSpeedSlow - 22
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a> 11:35:57.518 INFO (Graph.java:976)     Graphwide - 1
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a> 11:35:57.518 INFO (Graph.java:976)     GraphConnectivity - 407
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a> 11:35:57.519 INFO (Graph.java:976)     ParkAndRideUnlinked - 1
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a> 11:35:57.519 INFO (Graph.java:976)     StopNotLinkedForTransfers - 31
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a> 11:35:57.519 INFO (Graph.java:976)     NoFutureDates - 1
</code></pre></div>
<p>The full set of issues can be written out to an HTML report for closer inspection. To enable the
creation of these (potentially voluminous) HTML reports, add <code>"dataImportReport" : true</code> to your
graph builder JSON configuration.</p>
<p>If the graph is saved to a file, these issues are saved with it and can be examined later. Currently
the only tool for doing this is the "Graph Visualizer", which is not particularly well maintained
and is intended for use by software developers familiar with OTP who can patch up the code as
needed.</p>
<h2 id="debug-layers">Debug layers</h2>
<p>OpenTripplanner has option to ease debugging problems with graph. Older option is graph visualizer.
Which you can enable with <code>--visualize</code> parameter instead of <code>--server</code> when starting OTP. There you
can see whole graph. You can click on edges and vertices and see the metadata. It is useful to see
if street has expected options. And if connections are where they are expected.</p>
<p>It can be hard to use on large graphs since, whole graph is displayed at once. And it can be hard to
search for specific streets since only street graph is shown without the rest of information.</p>
<p>Another option is to use debug layers, which shows extra layers on top of the
normal <a href="http://localhost:8080">debug UI map</a>. If you want to see them you need to open the map layer
selector on the top left hand side and choose the requested layer.</p>
<p>Currently you can choose between:</p>
<ul>
<li>Wheelchair access (which colors street edges red if they don't allow wheelchair or green
  otherwise)</li>
<li><a href="./#Bicycle-safety-factor">Bicycle safety</a> (colors street edges based on
  how good are for cycling [smaller is better])</li>
<li>Traversal permissions (colors street edges based on what types of transit modes are allowed to
  travel on them (Pedestrian, cycling, car are currently supported)) Traversal permissions layer
  also draws links from transit stops/vehicle rentals and P+R to graph. And also draws transit
  stops, vehicle rentals and P+R vertices with different color.</li>
<li>No thru traffic - streets are colored if the edge has thru traffic restrictions (car and bicycle
  = <code>red</code>, car only = <code>orange</code>, bicycle only = <code>blue</code>, and no-restriction = <code>light gray</code>)</li>
</ul>
<h3 id="interpretation-traversal-permissions-layer">Interpretation Traversal permissions layer</h3>
<p>A sample traversal permissions layer looks like the following
<img alt="screen shot 2015-06-26 at 11 45 22" src="https://cloud.githubusercontent.com/assets/4493762/8374829/df05c438-1bf8-11e5-8ead-c1dea41af122.png" /></p>
<ul>
<li>Yellow lines is the link between a stop and the street graph.</li>
<li>Grey lines are streets one can travel with the mode walk, bike, or car</li>
<li>Green lines are paths one can travel with the mode walk only</li>
<li>Red lines are streets one can travel with the mode car only</li>
<li>Grey dots vertices where edges are connected. If two edges are crossing w/o a vertice at the
  intersection point, users will not be able to go from one street to the other. But this can be
  valid in case of over/under pass for example. If it's an error, it's usually caused by improperly
  connected OSM data (a shared OSM node is required).</li>
</ul>
<h2 id="openstreetmap-data">OpenStreetMap Data</h2>
<h3 id="tags-affecting-permissions-and-bicycle-safety">Tags affecting permissions and bicycle safety</h3>
<p>OTP has a very flexible system for deciding when a street is to be allowed by pedestrians, bicycles
or cars.</p>
<p>To configure the which settings to use for your location, please use
the <a href="../BuildConfiguration/#Osm-Tag-Mapping">osmTagMapping config attribute</a>.</p>
<p>In the following section we will discuss the default case, which will be used if the property is not
set.</p>
<h3 id="default-settings">Default settings</h3>
<p>Access tags (such as bicycle/foot = yes/no/designated) can be used to override default
graph-building parameters.</p>
<p>As a default, foot and bicycle traffic is ''not'' allowed on <code>highway=trunk</code>, <code>highway=trunk_link</code>
, <code>highway=motorway</code>, <code>highway=motorway_link</code>, or <code>highway=construction</code>.</p>
<p>Both <em>are</em> allowed on <code>highway=pedestrian</code>, <code>highway=cycleway</code>, and <code>highway=footway</code>.</p>
<p>Finally, bicycles are <em>not</em> allowed on <em>highway=footway</em> when any of the following tags appear on a
footway: <code>footway=sidewalk</code>, <code>public_transport=platform</code>, or <code>railway=platform</code>.</p>
<p>Other access tags (such as <code>access=no</code> and <code>access=private</code> affect routing as well, and can be
overridden similarly. While <code>access=no</code> prohibits all traffic, <code>access=private</code> disallows through
traffic.</p>
<h3 id="bicycle-safety-factor">Bicycle safety factor</h3>
<p>Bicycle routing is even more configurable than the other traverse modes: during graph build a
so-called bicycle safety score is computed for each street. You can think of this score as a penalty
for traversing this way so the lower the score the better.</p>
<p>For example if a way is tagged with <code>surface=sand</code> it receives a safety score of 100 which means
that it's 100 times worse to cycle on when compared to a way which has a safety score of 1.</p>
<p>How this is calculated depends on two things</p>
<ul>
<li>the incline of the way (not read from OSM but from
  the <a href="../Configuration/#Elevation data">separately configured elevation data</a>)</li>
<li>its OSM tags</li>
</ul>
<p>At request time you can then use the <code>triangleFactors</code> to decide how important bicycle safety is
compared to shorter distances and flatness.</p>
<p>Each <code>WayPropertySet</code> contains rules for a given set of tag matchers that influence the bicycle
safety score. For example, a rule looks like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">props</span><span class="p">.</span><span class="na">setProperties</span><span class="p">(</span><span class="s">&quot;highway=track&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">StreetTraversalPermission</span><span class="p">.</span><span class="na">ALL</span><span class="p">,</span><span class="w"> </span><span class="mf">1.3</span><span class="p">,</span><span class="w"> </span><span class="mf">1.3</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>This means that an OSM way with the tag <code>highway=track</code> is traversable by all modes (pedestrian,
bicycle, car) and that its bicycle safety score when you traverse in order of the way is <code>1.3</code> and
also <code>1.3</code> when going the other way
(smaller means more cycle-friendly).</p>
<p>If there is a more specific matcher like <code>highway=track;bicycle=no</code> and it matches a given OSM way,
it is chosen instead and its settings applied.</p>
<p>The score can be any positive number but the range (as of writing this) goes from <code>0.6</code> for bike
lanes to <code>100</code> for ways that consist of sand. To figure out a good value for your set of tags you
should read the bicycle safety report (see below) or the source code of your <code>OsmTagMapper</code>
to get a feeling for how much certain tags are penalised or rewarded.</p>
<p>There are also so-called mixins. These are applied on top of the most specific matchers and a single
OSM way can match many mixins. The mixins' safety values are multiplied with the value of the base
(non-mixin) match. A mixin looks like this (note the <code>true</code> at the end):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">props</span><span class="p">.</span><span class="na">setProperties</span><span class="p">(</span><span class="s">&quot;surface=mud&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">StreetTraversalPermission</span><span class="p">.</span><span class="na">ALL</span><span class="p">,</span><span class="w"> </span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>The Javadoc
of <a href="https://github.com/opentripplanner/OpenTripPlanner/blob/dev-2.x/src/main/java/org/opentripplanner/graph_builder/module/osm/OSMSpecifier.java"><code>OSMSpecifier.java</code></a>
contains the precise documentation about the syntax of the matchers.</p>
<p>There are a lot of rules for which tags results in a specific safety score so it's not easy to get
an overview. There is however an OTP feature to get an HTML viewer with a search feature that lets
you browse through the rules.</p>
<p><img alt="Bicycle safety report" src="../images/bicycle-safety-report.png" /></p>
<p>To enable it activate the <a href="../sandbox/ReportApi/">Report API sandbox feature</a>.</p>
<p>To view the output of the bicycle safety calculation on a map, check
the <a href="./#Debug-layers">debug layers</a>.</p>
<h3 id="railway-platforms">Railway Platforms</h3>
<p>OTP users in Helsinki have documented their best practices for coding railway platforms in
OpenStreetMap. These guidelines are
available <a href="https://wiki.openstreetmap.org/wiki/Digitransit#Editing_railway_platforms">in the OSM Wiki.</a></p>
<h2 id="debug-logging">Debug logging</h2>
<p>OTP use <a href="http://logback.qos.ch/">logback</a> and <a href="http://www.slf4j.org/">slj4j</a> as a logging framework.
Logging is configured in the <em>logback.xml</em> file inside the OTP jar file. See these frameworks for
more documentation on log configuration.</p>
<p>For developers, starting OTP using the <code>InteractiveOtpMain</code> is an easy way to configure debug
logging.</p>
<p>Some useful loggers</p>
<ul>
<li><code>TRANSFERS_EXPORT</code> Dump transfers to <em>transfers-debug.csv</em> file.</li>
<li><code>DATA_IMPORT_ISSUES</code> Write issues to debug lag as well as to the issue report.</li>
<li><code>REQ_LOG</code> Router request log. Enable with <code>requestLogFile</code> config parameter in build config.</li>
<li><code>org.opentripplanner.transit.raptor.RaptorService</code> Debug Raptor request and response</li>
</ul>
<h3 id="transit-search">Transit search</h3>
<p>The Raptor implementation support instrumentation of ACCEPT, REJECT, and DROP events for
stop-arrivals and trip boardings. Use the SpeedTest to pass in a set of stops and/or a specific path
to debug. This is useful when debugging why you do (not) get a particular result.</p>
<h3 id="gtfs-transferstxt-and-netex-interchange-import">GTFS Transfers.txt and NeTEx Interchange import</h3>
<p>Transfers may have effects on the routing which may be difficult to predict. OTP can dump all
imported transfers to file - <em>transfers-debug.csv</em>. This may help verify the result of the import or
find special test cases. To turn on the export enable the slf4j logger:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>  &lt;logger name=&quot;TRANSFERS_EXPORT&quot; level=&quot;info&quot; /&gt;
</code></pre></div>
<h3 id="further-information">Further information</h3>
<ul>
<li><a href="https://github.com/opentripplanner/OpenTripPlanner/wiki/GraphBuilder#graph-concepts">General information</a></li>
<li><a href="http://wiki.openstreetmap.org/wiki/OpenTripPlanner#Bicycle_routing">Bicycle routing</a></li>
<li><a href="https://github.com/opentripplanner/OpenTripPlanner/wiki/Indoor-mapping">Indoor mapping</a></li>
<li><a href="http://wiki.openstreetmap.org/wiki/OpenTripPlanner#Elevators">Elevators</a></li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../Security/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Security" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Security
            </div>
          </div>
        </a>
      
      
        
        <a href="../Developers-Guide/" class="md-footer__link md-footer__link--next" aria-label="Next: Developers&#39; Guide" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Developers' Guide
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "toc.integrate"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>