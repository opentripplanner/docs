
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.opentripplanner.org/dev-2.x/Localization/">
      
      
        <link rel="prev" href="../Developers-Guide/">
      
      
        <link rel="next" href="../Bibliography/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.16">
    
    
      
        <title>Localization - OpenTripPlanner 2</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#localization" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="OpenTripPlanner 2" class="md-header__button md-logo" aria-label="OpenTripPlanner 2" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OpenTripPlanner 2
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Localization
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/opentripplanner/OpenTripPlanner" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="OpenTripPlanner 2" class="md-nav__button md-logo" aria-label="OpenTripPlanner 2" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    OpenTripPlanner 2
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/opentripplanner/OpenTripPlanner" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Product-Overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Product Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Governance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Governance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../History/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    History
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Presentations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Presentations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Roadmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roadmap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Deployments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deployments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Visual-Identity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visual Identity
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Usage
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Basic-Tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Data-Sources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Sources
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Getting-OTP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting OTP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Container-Image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Container Image
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../System-Requirements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Requirements and Suggestions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Preparing-OSM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Preparing OSM Data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Netex-Norway/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Netex and SIRI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Troubleshooting-Routing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Version-Comparison/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Comparing OTP2 to OTP1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Frontends/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Frontends
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    APIs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            APIs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../apis/Apis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../apis/GraphQL-Tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GraphQL Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../apis/GTFS-GraphQL-API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GTFS GraphQL API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../apis/TransmodelApi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transmodel (NeTEx) GraphQL API
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BuildConfiguration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RouterConfiguration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Router
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RouteRequest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Route Request
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../UpdaterConfig/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Realtime Updaters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Migrating-Configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migrating between versions/builds
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Features explained
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Features explained
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RoutingModes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Routing modes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../In-Station-Navigation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    In-station navigation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BoardingLocations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Boarding Locations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StopAreas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stop Area Relations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../IslandPruning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Street Graph Pruning
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Accessibility/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accessibility
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Travel Time Analysis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Development
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Developers-Guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developers' Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Localization
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Localization
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#for-software-developers-adding-new-strings" class="md-nav__link">
    <span class="md-ellipsis">
      For Software Developers: Adding New Strings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="For Software Developers: Adding New Strings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples:
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-translated-string" class="md-nav__link">
    <span class="md-ellipsis">
      Basic translated string
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#normal-string-with-context" class="md-nav__link">
    <span class="md-ellipsis">
      Normal string with context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plural-strings" class="md-nav__link">
    <span class="md-ellipsis">
      Plural strings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-translations" class="md-nav__link">
    <span class="md-ellipsis">
      Updating translations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Updating translations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-babel" class="md-nav__link">
    <span class="md-ellipsis">
      Installing Babel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-i18next-conv" class="md-nav__link">
    <span class="md-ellipsis">
      Installing i18next-conv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-the-pot-template" class="md-nav__link">
    <span class="md-ellipsis">
      Updating the .pot Template
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#for-translators-creating-new-translations" class="md-nav__link">
    <span class="md-ellipsis">
      For Translators: Creating New Translations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="For Translators: Creating New Translations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-new-translation-file" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a New Translation File
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performing-the-translation" class="md-nav__link">
    <span class="md-ellipsis">
      Performing the Translation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performing the Translation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#translating-strings" class="md-nav__link">
    <span class="md-ellipsis">
      Translating Strings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#caveats" class="md-nav__link">
    <span class="md-ellipsis">
      Caveats
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Bibliography/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bibliography
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Codestyle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Codestyle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SandboxExtension/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sandbox Development
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ReleaseChecklist/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Checklist
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Sandbox
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Sandbox
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SandboxExtension/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/ActuatorAPI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Actuator API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/transferanalyzer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Direct Transfer Analyzer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/GoogleCloudStorage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Google Cloud Storage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/siri/SiriUpdater/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SIRI Updaters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/siri/SiriGooglePubSubUpdater/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SIRI Updaters (Google Cloud)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/siri/SiriAzureUpdater/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SIRI Updater (Azure)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/VehicleRentalServiceDirectory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vehicle Rental Service Directory API support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/SmooveBikeRental/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Smoove Bike Rental Updator Support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/MapboxVectorTilesApi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mapbox Vector Tiles API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/Flex/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flex Routing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/ReportApi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Report API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/InteractiveOtpMain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interactive OTP Launcher
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/ParkAndRideApi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Park and Ride API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/DataOverlay/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Overlay
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/VehicleParking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vehicle Parking Updaters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/GeocoderAPI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Geocoder API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/IBIAccessibilityScore/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IBI Accessibility Score
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/Fares/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fares
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/RideHailing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ride Hailing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/Emissions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Emissions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/StopConsolidation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stop Consolidation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="localization">Localization</h1>
<p>NOTE: This documentation pertains to the client included in the main OTP repository. THIS BUILT-IN
OTP CLIENT IS PROVIDED FOR TEST AND DEBUGGING PURPOSES. IT IS NOT MEANT FOR PRODUCTION USE.</p>
<p>This page contains instructions for both developers and translators on how to make the OTP interface
usable by people who speak different languages. Developers will need to take certain steps to mark
translatable strings within the source code. Translators will need to edit specific files within the
project to create or revise the translation for their language.</p>
<p>In OTP we use gettext for localization, for the following reasons:</p>
<ul>
<li><a href="http://pology.nedohodnik.net/doc/user/en_US/ch-poformat.html#sec-poplurals">Plural suport</a></li>
<li><a href="http://pology.nedohodnik.net/doc/user/en_US/ch-poformat.html#sec-poautocmnt">Context support</a></li>
<li>Automatic extraction of translatable strings from source code</li>
<li><a href="http://pology.nedohodnik.net/doc/user/en_US/ch-poformat.html#sec-poautocmnt">Translator comments</a>
  support</li>
<li>Source references (we can see where each translated string is used in the source code)</li>
</ul>
<p>In the Javascript UI the <a href="http://i18next.com">i18next</a> library is used.</p>
<p>Three types of files are used in the OTP localization process:</p>
<ul>
<li>The <code>.pot</code> file is the message template. It is a starting point for creating new <code>.po</code> files.</li>
<li><code>.po</code> files are created and edited by translators based on the <code>.pot</code> file.</li>
<li><code>.json</code> files are generated from the <code>.po</code> files for each language.</li>
<li><code>.js</code> files are localization configuration files which specify units and time/date formats.</li>
</ul>
<p>Only the <code>.po</code> and <code>.js</code> files are directly edited. The <code>.pot</code> file is created from an automated
analysis of annotated source code. The <code>.json</code> files are also automatically generated as an easy way
for the Javascript UI to consume the contents of the <code>.po</code> files.</p>
<p>All translation files are in the directory <code>/src/client/i18n</code>.</p>
<h2 id="for-software-developers-adding-new-strings">For Software Developers: Adding New Strings</h2>
<p>When you add a string to Javascript source that will be seen by the end user, wherever that string
is referenced you should surround it with a call to a special function. The name of the function
depends on what kind of string it is:</p>
<ul>
<li>basic string: <code>_tr('string', parameters)</code></li>
<li>basic string with context: <code>ngettext('context', 'string')</code></li>
<li>string with plural: <code>ngettext('singular', 'plural', quantity)</code></li>
<li>string with plural and context: <code>npgettext('context', 'singular', 'plural', quantity)</code></li>
</ul>
<p>For more detail,
see <a href="http://www.diveintojavascript.com/projects/javascript-sprintf">Sprintf parameters</a>.</p>
<p>A "context" is any string (preferably short and without whitespace) that is used to disambiguate the
translation of the main string. It is used when developers get input from translators that some
string should be translated in different ways in different parts of the program. Each of those
distinct places will be assigned a different context string.</p>
<p>When you add strings to the source code, if you think that translators might not understand how the
string is used or what parameters it requires, add translator comments like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1">//TRANSLATORS: Start: location at [time date] (Used in print itinerary  </span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="c1">//when do you start your trip)                                          </span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="nx">html</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s1">&#39;&lt;h3&gt;&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">_tr</span><span class="p">(</span><span class="s1">&#39;Start: %s at %s&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getStartLocationStr</span><span class="p">(),</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getStartTimeStr</span><span class="p">())</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;&lt;/h3&gt;&#39;</span><span class="p">;</span>
</code></pre></div>
<p>Translator comments must always start with <code>TRANSLATORS:</code> and must be in the line immediately before
translated string. Otherwise they won't be extracted together with the string.</p>
<h3 id="examples">Examples:</h3>
<h4 id="basic-translated-string">Basic translated string</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">//TRANSLATORS: Board Public transit route name (agency name     </span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="c1">//Stop ID ) start time                                          </span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="nx">html</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s1">&#39;&lt;li&gt;&lt;b&gt;&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">_tr</span><span class="p">(</span><span class="s1">&#39;Board&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;&lt;/b&gt;: &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">leg</span><span class="p">.</span><span class="kr">from</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39; (&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">leg</span><span class="p">.</span><span class="kr">from</span><span class="p">.</span><span class="nx">stopId</span><span class="p">.</span><span class="nx">agencyId</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39; Stop ID #&#39;</span><span class="w"> </span><span class="o">+</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="c1">//With named sprintf parameters (our preferred option)</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="c1">//TRANSLATORS: Start: location at [time date] (Used in print itinerary  </span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="c1">//when do you start your trip)                                          </span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="nx">html</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s1">&#39;&lt;h3&gt;&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">_tr</span><span class="p">(</span><span class="s1">&#39;Start: %(location)s at %(time_date)s&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span><span class="s1">&#39;location&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getStartLocationStr</span><span class="p">(),</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span><span class="s1">&#39;time_date&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getStartTimeStr</span><span class="p">()</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="p">})</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;&lt;/h3&gt;&#39;</span><span class="p">;</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="c1">//With positional sprintf parameters (to be avoided because word order changes between languages)</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="nx">html</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s1">&#39;&lt;h3&gt;&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">_tr</span><span class="p">(</span><span class="s1">&#39;End: %1$s at %2$s&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getEndLocationStr</span><span class="p">(),</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getEndTimeStr</span><span class="p">())</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;&lt;/h3&gt;&#39;</span><span class="p">;</span>
</code></pre></div>
<h4 id="normal-string-with-context">Normal string with context</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">leg</span><span class="p">.</span><span class="nx">headsign</span><span class="p">)</span><span class="w"> </span><span class="nx">html</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">pgettext</span><span class="p">(</span><span class="s2">&quot;bus_direction&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot; to &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">leg</span><span class="p">.</span><span class="nx">headsign</span><span class="p">;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="c1">//same string could be different translation</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="c1">//TRANSLATORS: [distance] to [name of destination]              </span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="nx">html</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s2">&quot; &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">otp</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">Itin</span><span class="p">.</span><span class="nx">distanceString</span><span class="p">(</span><span class="nx">leg</span><span class="p">.</span><span class="nx">distance</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">pgettext</span><span class="p">(</span><span class="s2">&quot;direction&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot; to &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">leg</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
</code></pre></div>
<h4 id="plural-strings">Plural strings</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1">//TRANSLATORS: widget title                                             </span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="k">this</span><span class="p">.</span><span class="nx">setTitle</span><span class="p">(</span><span class="nx">ngettext</span><span class="p">(</span><span class="s2">&quot;%d Itinerary Returned&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;%d Itineraries Returned&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">itineraries</span><span class="p">.</span><span class="nx">length</span><span class="p">));</span>
</code></pre></div>
<p>If you add new strings to the source code, it is good practice to also update the translation
template and the translations but it is not mandatory (these can be updated later). It is also
recommended to include "i18n string change" in the commit message.</p>
<h2 id="updating-translations">Updating translations</h2>
<p>Translations are updated with the help of <a href="http://babel.pocoo.org/">Babel</a>
and <a href="https://github.com/jamuhl/i18next-gettext-converter">i18next-conv</a> (xgettext doesn't yet have
great Javascript support).</p>
<p>Babel is used to extract strings from the Javascript source code into the shared <code>.POT</code> translation
template, and also for updating the existing <code>.PO</code> language translations when new strings are
introduced in the template. i18next-conv is used to convert the <code>.PO</code> translation files for the
individual languages to <code>.json</code> files which are used by the Javascript translation library.</p>
<h3 id="installing-babel">Installing Babel</h3>
<p>You can install it from your operating system's package repository (if available) or you can
use <a href="http://simononsoftware.com/virtualenv-tutorial/">virtualenv</a>.</p>
<ol>
<li>Install virtualenv (This depends on your operating system)</li>
<li>Create virtualenv with name .venv in directory where src and other files resides (Root
   OpenTripPlanner directory). <code>virtualenv2 .venv</code>(python 2) or <code>python3 -m venv .venv</code> (python 3)</li>
<li>Use virtualenv <code>source .venv/bin/activate</code></li>
<li>Install babel <code>pip install babel</code></li>
</ol>
<p>If you didn't install babel from virtualenv in root OpenTripPlanner directory you have to add path
to babel in Makefile. change <code>PYBABEL</code> variable to path to pybabel.</p>
<h3 id="installing-i18next-conv">Installing i18next-conv</h3>
<p>i18next-conv requires <a href="http://nodejs.org/">nodejs</a>.</p>
<p>Once you have NodeJS installed, use <code>npm install i18next-conv</code> to install i18next-conv in the same
directory where you created virtualenv.</p>
<h3 id="updating-the-pot-template">Updating the <code>.pot</code> Template</h3>
<p>In the root of the OTP repo, run <code>make</code>. The commands in the <code>Makefile</code> will extract the
translatable strings from the Javascript files and update the translation template <code>messages.pot</code>,
as well as the <code>.po</code> translation files for all the different languages.</p>
<p>Once this is done, you can translate the new strings in the <code>.po</code> files. After saving the
updated <code>.po</code> file, run
<code>make update_js</code> to transform to PO files into <code>.json</code>, which is used at runtime by the Javascript
translation library. After you rebuild OTP, all new strings should be visible in the UI.</p>
<h2 id="for-translators-creating-new-translations">For Translators: Creating New Translations</h2>
<p>The following can get a bit technical. If you want to do a translation but don't want to / know how
to install all this software, post to the <a href="https://gitter.im/opentripplanner/OpenTripPlanner">Gitter chat room</a> 
stating what language you want to translate, and someone will make you a corresponding <code>.po</code> file.</p>
<h3 id="creating-a-new-translation-file">Creating a New Translation File</h3>
<p>New <code>.po</code> files are created from the <code>.pot</code> template with the help of <code>msginit</code>, which is run like
this:
<code>msginit init -l &lt;LAN&gt; -i messages.pot -o &lt;LAN&gt;.po</code>, where <code>&lt;LAN&gt;</code> is a culture code. New <code>.po</code>files
can also be created with the help of <code>Poedit</code>. All translation files should be placed in the
directory <code>/src/client/i18n</code>.</p>
<p>Please use the ISO language code as the culture code (e.g. <code>fr.po</code> for French). We will append
country codes in the following limited circumstances:</p>
<ul>
<li>British versus US English (<code>en_GB.po</code> and <code>en_US.po</code>)</li>
<li>Brazilian Portuguese <code>pt_BR.po</code>, as opposed to <code>pt.po</code> for European Portuguese</li>
<li>Chinese: <code>zh_TW.po</code> for traditional characters as used in e.g. Taiwan and Hong Kong,
  and <code>zh_CN.po</code> for simplified characters as used in mainland China, Singapore, etc.</li>
</ul>
<p>These conventions are based on
the <a href="https://help.launchpad.net/Translations/YourProject/ImportingTranslations">Launchpad Translation</a>
page.</p>
<p>In Linux you can see the culture codes for all the locales you have installed with the
command <code>locale -a</code>. A list of culture codes is also
availible <a href="http://download1.parallels.com/SiteBuilder/Windows/docs/3.2/en_US/sitebulder-3.2-win-sdk-localization-pack-creation-guide/30801.htm">here</a>
.</p>
<h3 id="performing-the-translation">Performing the Translation</h3>
<h4 id="configuration">Configuration</h4>
<p>Copy the locale configuration script <code>English.js</code> from <code>/src/client/js/otp/locale</code>
to <code>YourLanguage.js</code> and customize it to your language. Change the name, units, locale_short and
datepicker_locale_short values. Translate infoWidgets and localize the time/date formats.</p>
<p>Then take the following steps:</p>
<ul>
<li>Add the culture code to the <code>LANGS</code> variable in the Makefile`</li>
<li>Add the new <code>YourLanguage.js</code> to the locales variable in <code>/src/client/js/otp/config.js</code></li>
<li>Add a new datepicker translation to <code>/src/client/js/lib/jquery-ui/i18n</code></li>
<li>Load the new datepicker translation and <code>YourLanguage.js</code> in <code>/src/client/index.html</code></li>
</ul>
<h4 id="translating-strings">Translating Strings</h4>
<p>For translating the strings themselves, you can use any program that supports gettext files. You can
in theory use any text editor, but programs or plugins purpose-built for translating are
recommended. Most of them support checking parameter correctness, translation memory, web
translating services etc. to make the task easier.</p>
<p>Here are some such programs (all free and open source):</p>
<ul>
<li><a href="http://poedit.net/">Poedit</a> For Linux, Windows, and Mac. Use a version newer then 1.5. This is
  the recommended choice for getting started with localization. It supports translation memory and
  file context.</li>
<li><a href="https://localise.biz/free/poedit">Web Poedit</a> Usable from within a web browser, you don't have to
  install or register</li>
<li><a href="http://www.gted.org/">Gted</a> A plugin for the Eclipse IDE.</li>
<li><a href="http://userbase.kde.org/Lokalize">Lokalize</a> Runs under KDE on Linux, has some Windows support.
  Supports translation memory and file context.</li>
<li><a href="http://virtaal.translatehouse.org/index.html">Virtaal</a> For Linux, Windows, and beta for Mac.
  Supports Google and Microsoft web translation and other translation memory services.</li>
</ul>
<p>All these programs support setting a string to "fuzzy", marking that it needs review etc. in case
you translate something but aren't sure of it's correctness. Sometimes those flags are set
automatically if the original string was changed and translators must check if the translation is
still correct.</p>
<h4 id="caveats">Caveats</h4>
<p>Be careful when translating that the translated strings have the same format as the original. If
spaces appear at the start or end of the strings, they must also appear in the translation. The
order of unnamed (positional) parameters may change depending on the target language. You can also
leave parameter out of the translation if it is irrelevant in the target language.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["toc.integrate", "content.code.copy", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.bd41221c.min.js"></script>
      
    
  </body>
</html>